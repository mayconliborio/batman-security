<template>
  <div
    class="vulnerability-row w-100 is-clickable flex-justify-between"
    :data-cy="'Vulnerability-' + index + '-row'"
    @click="$emit('showClick', vulnerability)"
  >
    <span class="flex-justify-center" style="width: 10%">
      <img
        :src="
          require(`../../../src/assets/icons/critical-${vulnerability.criticalityLevel.value}.svg`)
        "
        :alt="'Grau de Criticidade: ' + vulnerability.criticalityLevel.name"
        :title="'Grau de Criticidade: ' + vulnerability.criticalityLevel.name"
      />
    </span>
    <span class="flex-justify-center" style="width: 25%">
      {{ vulnerability.title }}
    </span>
    <span class="flex-justify-center" style="width: 20%">
      {{ vulnerability.type.name }}
    </span>
    <div class="flex-justify-center" style="width: 25%">
      <img
        class="render-image"
        v-if="vulnerability.evidences && vulnerability.evidences.length > 0"
        :src="vulnerability.evidences[0]"
        alt="Pre visualização da primeira evidência"
        title=""
      />
      <span class="error-text" v-else> Sem Evidência</span>
    </div>
    <span class="flex-justify-center" style="width: 10%">
      <i
        data-cy="Editar-button"
        title="Editar Vulnerabilidade"
        :class="vulnerability.edit"
        class="is-clickable edit-button"
        @click="$emit('editClick', vulnerability)"
      ></i>
    </span>
    <span class="flex-justify-center" style="width: 10%">
      <i
        data-cy="Deletar-button"
        title="Excluir Vulnerabilidade"
        :class="vulnerability.delete"
        class="is-clickable delete-button"
        @click="$emit('deleteClick', vulnerability)"
      ></i>
    </span>
  </div>
</template>

<script>
export default {
  name: "VulnerabilityRow",
  props: {
    index: Number,
    vulnerability: {},
  },
  data() {
    return {
      uniqueId: "",
    };
  },
  created() {
    this.uniqueId = Date.now().toString() + Math.random().toString(16).slice(2);
  },
};
</script>

<style scoped lang="scss">
* {
  font-size: 18px;
}

.vulnerability-row {
  height: 80px;
  padding: 0 40px;
  border-bottom: 1px solid $blackColor;
  background-color: $rowColor;
  //user-select: auto !important;
}

#vulnerability-row:hover {
  background-color: $activeRowColor;
}

.span i:hover ~ #vulnerability-row {
  pointer-events: none;
}

.error-text {
  color: $dangerColor;
}

.edit-button:hover {
  color: $primaryColor;
}

.delete-button:hover {
  color: $dangerColor;
}
.render-image {
  max-height: 70px;
  max-width: 100%;
}
</style>
